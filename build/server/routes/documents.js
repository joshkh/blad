// Generated by CoffeeScript 1.6.3
(function() {
  module.exports = function(_arg) {
    var app, log;
    app = _arg.app, log = _arg.log;
    return {
      '/api/documents': {
        get: function() {
          var _this = this;
          log.info('Get all documents');
          return app.db(function(collection) {
            return collection.find({}, {
              'sort': 'url'
            }).toArray(function(err, docs) {
              if (err) {
                throw err;
              }
              _this.res.writeHead(200, {
                'content-type': 'application/json'
              });
              _this.res.write(JSON.stringify(docs));
              return _this.res.end();
            });
          });
        }
      }
    };
  };

}).call(this);
